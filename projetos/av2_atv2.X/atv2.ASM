;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*              MODIFICAÇÕES PARA USO COM 12F675                   *
;*                FEITAS PELO PROF. MARDSON                        *
;*                    FEVEREIRO DE 2016                            *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                       NOME DO PROJETO                           *
;*                           CLIENTE                               *
;*         DESENVOLVIDO PELA MOSAICO ENGENHARIA E CONSULTORIA      *
;*   VERSÃO: 1.0                           DATA: 17/06/03          *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                     DESCRIÇÃO DO ARQUIVO                        *
;*-----------------------------------------------------------------*
;*   MODELO PARA O PIC 12F675                                      *
;*                                                                 *
;*                                                                 *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                     ARQUIVOS DE DEFINIÇÕES                      *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
#INCLUDE <p12f675.inc>	;ARQUIVO PADRÃO MICROCHIP PARA 12F675

	__CONFIG _BODEN_OFF & _CP_OFF & _PWRTE_ON & _WDT_OFF & _MCLRE_OFF & _INTRC_OSC_NOCLKOUT

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                    PAGINAÇÃO DE MEMÓRIA                         *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;DEFINIÇÃO DE COMANDOS DE USUÁRIO PARA ALTERAÇÃO DA PÁGINA DE MEMÓRIA
#DEFINE	BANK0	BCF STATUS,RP0	;SETA BANK 0 DE MEMÓRIA
#DEFINE	BANK1	BSF STATUS,RP0	;SETA BANK 1 DE MAMÓRIA

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                         VARIÁVEIS                               *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; DEFINIÇÃO DOS NOMES E ENDEREÇOS DE TODAS AS VARIÁVEIS UTILIZADAS 
; PELO SISTEMA

	CBLOCK	0x20	;ENDEREÇO INICIAL DA MEMÓRIA DE
					;USUÁRIO
		W_TEMP		;REGISTRADORES TEMPORÁRIOS PARA USO
		STATUS_TEMP	;JUNTO ÀS INTERRUPÇÕES

		;NOVAS VARIÁVEIS
		MSD	;DIGITO MAIS SIGNIFICATIVO
		LSD	;DIGITO MENOS SIGNIFICATIVO
		TEMP	;AUX REGISTRADOR

	ENDC			;FIM DO BLOCO DE MEMÓRIA
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                        FLAGS INTERNOS                           *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; DEFINIÇÃO DE TODOS OS FLAGS UTILIZADOS PELO SISTEMA

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                         CONSTANTES                              *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; DEFINIÇÃO DE TODAS AS CONSTANTES UTILIZADAS PELO SISTEMA

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                           ENTRADAS                              *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; DEFINIÇÃO DE TODOS OS PINOS QUE SERÃO UTILIZADOS COMO ENTRADA
; RECOMENDAMOS TAMBÉM COMENTAR O SIGNIFICADO DE SEUS ESTADOS (0 E 1)

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                           SAÍDAS                                *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; DEFINIÇÃO DE TODOS OS PINOS QUE SERÃO UTILIZADOS COMO SAÍDA
; RECOMENDAMOS TAMBÉM COMENTAR O SIGNIFICADO DE SEUS ESTADOS (0 E 1)

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                       VETOR DE RESET                            *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

	ORG	0x00			;ENDEREÇO INICIAL DE PROCESSAMENTO
	GOTO	INICIO
	
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                    INÍCIO DA INTERRUPÇÃO                        *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; ENDEREÇO DE DESVIO DAS INTERRUPÇÕES. A PRIMEIRA TAREFA É SALVAR OS
; VALORES DE "W" E "STATUS" PARA RECUPERAÇÃO FUTURA

	ORG	0x04			;ENDEREÇO INICIAL DA INTERRUPÇÃO
	MOVWF	W_TEMP		;COPIA W PARA W_TEMP
	SWAPF	STATUS,W
	MOVWF	STATUS_TEMP	;COPIA STATUS PARA STATUS_TEMP

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                    ROTINA DE INTERRUPÇÃO                        *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; AQUI SERÁ ESCRITA AS ROTINAS DE RECONHECIMENTO E TRATAMENTO DAS
; INTERRUPÇÕES

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                 ROTINA DE SAÍDA DA INTERRUPÇÃO                  *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; OS VALORES DE "W" E "STATUS" DEVEM SER RECUPERADOS ANTES DE 
; RETORNAR DA INTERRUPÇÃO

SAI_INT
	SWAPF	STATUS_TEMP,W
	MOVWF	STATUS		;MOVE STATUS_TEMP PARA STATUS
	SWAPF	W_TEMP,F
	SWAPF	W_TEMP,W	;MOVE W_TEMP PARA W
	RETFIE

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*	            	 ROTINAS E SUBROTINAS                      *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
; CADA ROTINA OU SUBROTINA DEVE POSSUIR A DESCRIÇÃO DE FUNCIONAMENTO
; E UM NOME COERENTE ÀS SUAS FUNÇÕES.

;SIMPLES ROTINA PARA MOSTRAR NO GPIO O VALOR DO DIGITO MAIS SIGNIFICATIVO. OBS: GP5,GP4,GP1,GP0 É A SEQUENCIA DO MAIS PRA O MENOS SIGNIFICATIVO
HIGH_DIG
	MOVFW	GPIO		;SALVA O ESTADO DO GPIO EM W
	MOVWF	TEMP		;E ARMAZENA-O EM TEMP, ASSIM NÃO IRA SOFRER NENHUM ALTERAÇÃO ATÉ O FINAL
	MOVLW	B'00001100'	;MOVE O SEGUINTE VALOR PARA O W, E ASSIM
	ANDWF	TEMP,W		;FAZER O AND COM O TEMP(GPIO) PARA LIMPAR OS VALORES DE GP0,1,4,5 QUE CORRESPONDE NA VARIÁVEL E SALVA O VALOR FINAL EM W	
	IORWF	MSD,W		;APLICANDO UM OU ENTRE O ESTADO DO GPIO E LSD PARA NÃO ALTERAR OS VALORES DO GP2,3 E ATRIBUIR O VALOR DA TENSÃO NOS PINOS CERTOS
	MOVWF	GPIO		;O VALOR DO OR É SALVO EM W E EM SEGUIDA TRANSFERIDO PARA O GPIO
	RETURN


;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                     INICIO DO PROGRAMA                          *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
	
INICIO
	BANK1				;ALTERA PARA O BANCO 1
	MOVLW	B'00001100' ;CONFIGURA TODAS AS PORTAS DO GPIO (PINOS)
	MOVWF	TRISIO		;COMO SAÍDAS, TIRANDO O GP2 E GP3
	MOVLW	B'00000100'
	MOVWF	ANSEL 		;DEFINE PORTAS COMO Digital I/O, TIRANDO O GP2; USANDO O FOSC/2 - 1.6*10^-6
	MOVLW	B'00000000'
	MOVWF	OPTION_REG	;DEFINE OPÇÕES DE OPERAÇÃO
	MOVLW	B'00000000'
	MOVWF	INTCON		;DEFINE OPÇÕES DE INTERRUPÇÕES
	BANK0				;RETORNA PARA O BANCO
	MOVLW	B'00000111'
	MOVWF	CMCON		;DEFINE O MODO DE OPERAÇÃO DO COMPARADOR ANALÓGICO
	MOVLW	B'00001001'
	MOVWF	ADCON0		;DEFINE FORMATADO A ESQUERDA; VDD-REF ON; CHANNEL AN2; ADON

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                     INICIALIZAÇÃO DAS VARIÁVEIS                 *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
	
	CLRF	TEMP
	;LIMPA AMBOS REGISTRADOS QUE IRÃO CONTER O VALOR FINAL
	CLRF	MSD
	CLRF	LSD

;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                     ROTINA PRINCIPAL                            *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
MAIN
	BTFSS	GPIO,GP3	;TESTE O GP3 PARA VER SE TÁ LOW OU HIGH
	GOTO	LOW_DIG		;CHAMA A ROTINA QUE COLOCA O DIGITO MENOS SIGNIFICATIVO
	CALL	HIGH_DIG	;CHAMA A ROTINA QUE COLOCA O DIGITO MAIS SIGNIFICATIVO
	
BEGCONV 
	BSF	ADCON0,1	;INCIO DA CONVERSÃO A/D
	
AD_CONV	
	BTFSC	ADCON0,1	;ESPEAR ENQUANTO A CONVERSÃO NÃO ACABA
	GOTO	AD_CONV	    
	GOTO	PROC_AD		;QUANDO A CONVERSÃO ACABAR, CHAMA A ROTINA QUE IRA PROCESSAR PARA O VALOR CORRETO
	
	GOTO	MAIN

;ROTINA PARA COLOCAR O DIGITO MENOS SIGNIFICATIVO NO GPIO. OBS: GP5,GP4,GP1,GP0 É A SEQUENCIA DO MAIS PRA O MENOS SIGNIFICATIVO
LOW_DIG	
	MOVFW	GPIO		;SALVA O ESTADO DO GPIO EM W
	MOVWF	TEMP		;E ARMAZENA-O EM TEMP, ASSIM NÃO IRA SOFRER NENHUM ALTERAÇÃO ATÉ O FINAL
	MOVLW	B'00001100'	;MOVE O SEGUINTE VALOR PARA O W, E ASSIM 
	ANDWF	TEMP,W		;FAZER O AND COM O TEMP(GPIO) PARA LIMPAR OS VALORES DE GP0,1,4,5 QUE CORRESPONDE NA VARIÁVEL E SALVA O VALOR FINAL EM W	
	IORWF	LSD,W		;APLICANDO UM OU ENTRE O ESTADO DO GPIO E LSD PARA NÃO ALTERAR OS VALORES DO GP2,3 E ATRIBUIR O VALOR DA TENSÃO NOS PINOS CERTOS
	MOVWF	GPIO		;O VALOR DO OR É SALVO EM W E EM SEGUIDA TRANSFERIDO PARA O GPIO
	GOTO	BEGCONV		;VOLTA PARA MAIN PULANDO A INSTRUÇÃO DO HG
	
PROC_AD
	MOVLW	.21		;O VALOR DE 1V CORRESPONDE A .21 NO REGISTRADOR
	SUBWF	ADRESH,W	;SUBTRAINDO-O(L) DO ADRESH PARA SABER SE A TENSÃO LIDA TÁ ENTRE 0 E 1
	BTFSS	STATUS,C	;CASO O BIT DE CARRY SEJA 0, ENTÃO O VALOR TÁ NO INTERVALO E 
	GOTO	RANGE_0_TO_1	;É CHAMADA A ROTINA PARA ARREDONDAR E COLOCAR O VALOR NO DIGITO 
	MOVLW	.42	    ;2	CASO O VALOR ANTERIOR NÃO ESTEJA ENTRE 0 E 1, O .42 É O VALOR PARA O 2V
	SUBWF	ADRESH,W	;SUBTRAINDO-O(L) DO ADRESH PARA SABER SE A TENSÃO LIDA TÁ ENTRE 1 E 2
	BTFSS	STATUS,C	;CASO O BIT DE CARRY SEJA 0, ENTÃO O VALOR TÁ NO INTERVALO E
	GOTO	RANGE_1_TO_2	;É CHAMADA A ROTINA PARA ARREDONDAR E COLOCAR O VALOR NO DIGITO 
	MOVLW	.64	    ;3	CASO O VALOR ANTERIOR NÃO ESTEJA ENTRE 1 E 2, O .64 É O VALOR PARA O 3V
	SUBWF	ADRESH,W	;SUBTRAINDO-O(L) DO ADRESH PARA SABER SE A TENSÃO LIDA TÁ ENTRE 2 E 3
	BTFSS	STATUS,C	;CASO O BIT DE CARRY SEJA 0, ENTÃO O VALOR TÁ NO INTERVALO E 
	GOTO	RANGE_2_TO_3	;É CHAMADA A ROTINA PARA ARREDONDAR E COLOCAR O VALOR NO DIGITO 
	MOVLW	.85	    ;4	CASO O VALOR ANTERIOR NÃO ESTEJA ENTRE 0 E 1, O .42 É O VALOR PARA O 2V
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_3_TO_4
    	MOVLW	.106	    ;5			A MESMO PROCEDIMENTO FEITO PARA O VALORES ANTERIORES SÃO FEITOS PARA O RESTANTE ATÉ 12 V
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_4_TO_5
	MOVLW	.128	    ;6
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_5_TO_6
	MOVLW	.149	    ;7
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_6_TO_7
	MOVLW	.170	    ;8
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_7_TO_8
	MOVLW	.192	    ;9
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_8_TO_9
	MOVLW	.213	    ;10
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_9_TO_10
	MOVLW	.234	    ;11
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_10_TO_11
	MOVLW	.255	    ;12
	SUBWF	ADRESH,W
	BTFSS	STATUS,C
	GOTO	RANGE_11_TO_12
	GOTO	MAIN
	
RANGE_0_TO_1
	MOVLW	.10;0.5		    O VALOR .10 EQUIVALE A 0.5V, ELE VAI SERVIR DE REFERENCIA PARA O ARREDONDAMENTO
	SUBWF	ADRESH,W	   ;SUBTRAI A REFERENCIA DO ADRESH, ASSIM SABEREMOS SE O VALOR TA MAIS PRA 0 OU PRA 1
	BTFSC	STATUS,C	   ;SE O BIT DE CARRY FOR 1, ENTÃO O VALOR DE ENTRADA TA MAIS PARA 1V
	GOTO	NEG1		   ;CHAMA A PARTE DE ARREDONDAMENTO PRA CIMA, SE NÃO, ELE IRA ARREDONDAR PARA BAIXO
	CLRF	MSD		   ;LIMPA O DIGITO MAIS SIGNIFICATIVO, POIS ESTAMOS ENTRE 0 E 1 VOLT
	MOVLW	.0		   ;SE TRATANDO DE ARREDONDAMENTO PRA BAIXO ENTRE 0 E 1, JOGA O 0 PARA O W
	MOVWF	LSD		   ;SALVA NA VARIÁVEL DO BIT MENOS SIGNIFICATIVO
	GOTO	MAIN		   ;RETORNA PARA MAIN
	NEG1	
		MOVLW	.1	   ;ROTINA DE ARREDONDAMENTO PARA CIMA
		MOVWF	LSD	   ;COLOCA 1 NO DIGITO MENOS SIGNIFICATIVO
		CLRF	MSD	   ;LIMPA O MAIS SIGNIFICATIVO
		GOTO	MAIN	   ;VOLTA PARA MAIN
	
	
RANGE_1_TO_2
	MOVLW	.32;1.5		   O VALOR .32 EQUIVALE A 1.5V, ELE VAI SERVIR DE REFERENCIA PARA O ARREDONDAMENTO
	SUBWF	ADRESH,W	  ;SUBTRAI A REFERENCIA DO ADRESH, ASSIM SABEREMOS SE O VALOR TA MAIS PRA 1 OU PRA 2
	BTFSC	STATUS,C	  ;SE O BIT DE CARRY FOR 1, ENTÃO O VALOR DE ENTRADA TA MAIS PARA 2V
	GOTO	NEG2		  ;CHAMA A PARTE DE ARREDONDAMENTO PRA CIMA, SE NÃO, ELE IRA ARREDONDAR PARA BAIXO
	CLRF	MSD		  ;LIMPA O DIGITO MAIS SIGNIFICATIVO, POIS ESTAMOS ENTRE 1 E 2 VOLT
	MOVLW	.1		  ;SE TRATANDO DE ARREDONDAMENTO PRA BAIXO ENTRE 0 E 1, JOGA O 1 PARA O W
	MOVWF	LSD		  ;SALVA NA VARIÁVEL DO BIT MENOS SIGNIFICATIVO
	GOTO	MAIN		  ;RETORNA PARA MAIN
	NEG2	
		MOVLW	.2	  ;ROTINA DE ARREDONDAMENTO PARA CIMA
		MOVWF	LSD	  ;COLOCA 2 NO DIGITO MENOS SIGNIFICATIVO
		CLRF	MSD	  ;LIMPA O MAIS SIGNIFICATIVO
		GOTO	MAIN	  ;VOLTA PARA MAIN
		
RANGE_2_TO_3
	MOVLW	.53;2.5		  NESTA ROTINA OS MESMO PASSOS SEGUIDOS ANTERIORMENTE SÃO EXECUTADOS PARA O RAIO EM QUESTÃO
	SUBWF	ADRESH,W				;ATÉ O VALOR 4
	BTFSC	STATUS,C
	GOTO	NEG3
	CLRF	MSD
	MOVLW	.2
	MOVWF	LSD
	GOTO	MAIN
	NEG3	
		MOVLW	.3
		MOVWF	LSD
		CLRF	MSD
		GOTO	MAIN
		
RANGE_3_TO_4
	MOVLW	.74;3.5		  NESTA ROTINA OS MESMO PASSOS SEGUIDOS ANTERIORMENTE SÃO EXECUTADOS PARA O RAIO EM QUESTÃO
	SUBWF	ADRESH,W				;ATÉ O VALOR 4
	BTFSC	STATUS,C
	GOTO	NEG4
	CLRF	MSD
	MOVLW	.3
	MOVWF	LSD
	GOTO	MAIN
	NEG4	
		MOVLW	B'00010000'
		MOVWF	LSD
		CLRF	MSD
		GOTO	MAIN
		
RANGE_4_TO_5
	MOVLW	.96;4.5			O VALOR .96 EQUIVALE A 4.5V, ENTÃO ESSA SERÁ A REFERENCIA PARA O ARREDONDAMENTO
	SUBWF	ADRESH,W		;SUBTRAI A REFERENCIA DO ADRESH, ASSIM SABEREMOS SE O VALOR TA MAIS PRA 4 OU PRA 5
	BTFSC	STATUS,C		;SE O BIT DE CARRY FOR 1, ENTÃO O VALOR DE ENTRADA TA MAIS PARA 5V
	GOTO	NEG5			;CHAMA A PARTE DE ARREDONDAMENTO PRA CIMA, SE NÃO, ELE IRA ARREDONDAR PARA BAIXO
	CLRF	MSD			;LIMPA O DIGITO MAIS SIGNIFICATIVO, POIS ESTAMOS ENTRE 4 E 5 VOLT
	MOVLW	B'00010000'		;MOVE O SEGUINTE VALOR PARA O W, ESSE VALOR IRA CORREONDER A 4, POIS O GPIO IRA TRABALHAR COM GP5,4,2,1, ENTÃO USAREMOS OS MESMO BITS PARA RESPRESNTAR O VALOR
	MOVWF	LSD			;MOVE O VALOR PARA O DIGITO MENOS SIGNIFICATIVO, ELE IRA JOGAR 0100 NO GPIO [GP5,4,1,0]=[0100]
	GOTO	MAIN			;VOLTA PARA A MAIN
	NEG5	
		MOVLW	B'00010001'	;NA ROTINA DE ARREDONDAMENTO PARA CIMA, O VALOR DO W IRA CORRESPONDER EM 5 NO GPIO
		MOVWF	LSD		;MOVE O VALOR PARA O DIGITO MENOS SIGNIFICATIVO, QUE ASSIM COMO O 4 SERA O 5 SERA REPRESENTADO USANDO A MESMA POSIÇÃO DE BITS    
		CLRF	MSD		;LIMPA O DIGITO MAIS SIGNIFICATIVO
		GOTO	MAIN		;RETORNA PARA MAIN
		
RANGE_5_TO_6
	MOVLW	.117;5.5		O VALOR .117 EQUIVALE A 5.5V, ENTÃO ESSA SERÁ A REFERENCIA PARA O ARREDONDAMENTO
	SUBWF	ADRESH,W		;SUBTRAI A REFERENCIA DO ADRESH, ASSIM SABEREMOS SE O VALOR TA MAIS PRA 5 OU PRA 6
	BTFSC	STATUS,C		;SE O BIT DE CARRY FOR 1, ENTÃO O VALOR DE ENTRADA TA MAIS PARA 6V
	GOTO	NEG6			;CHAMA A PARTE DE ARREDONDAMENTO PRA CIMA, SE NÃO, ELE IRA ARREDONDAR PARA BAIXO
	CLRF	MSD			;LIMPA O DIGITO MAIS SIGNIFICATIVO, POIS ESTAMOS ENTRE 5 E 6 VOLT
	MOVLW	B'00010001'		;MOVE O SEGUINTE VALOR PARA O W, ESSE VALOR IRA CORREPONDER A 5, POIS O GPIO IRA TRABALHAR COM GP5,4,2,1, ENTÃO USAREMOS OS MESMO BITS PARA RESPRESNTAR O VALOR
	MOVWF	LSD			;MOVE O VALOR PARA O DIGITO MENOS SIGNIFICATIVO, ELE IRA JOGAR 0101 NO GPIO [GP5,4,1,0]=[0101]
	GOTO	MAIN			;VOLTA PARA A MAIN
	NEG6	
		MOVLW	B'00010010'	;NA ROTINA DE ARREDONDAMENTO PARA CIMA, O VALOR DO W IRA CORRESPONDER EM 6 NO GPIO
		MOVWF	LSD		;MOVE O VALOR PARA O DIGITO MENOS SIGNIFICATIVO, QUE ASSIM COMO O 5 SERA O 6 TAMBÉM SERA REPRESENTADO USANDO A MESMA POSIÇÃO DE BITS
		CLRF	MSD		;LIMPA O DIGITO MAIS SIGNIFICATIVO
		GOTO	MAIN		;RETORNA PARA MAIN
		
RANGE_6_TO_7
	MOVLW	.138;6.5			NESTA ROTINA OS MESMO PASSOS SEGUIDOS ANTERIORMENTE SÃO EXECUTADOS PARA O RAIO EM QUESTÃO	    
	SUBWF	ADRESH,W				    ;ATÉ O VALOR 10
	BTFSC	STATUS,C
	GOTO	NEG7
	CLRF	MSD
	MOVLW	B'00010010'
	MOVWF	LSD
	GOTO	MAIN
	NEG7	
		MOVLW	B'00010011'
		MOVWF	LSD
		CLRF	MSD
		GOTO	MAIN
		
RANGE_7_TO_8
	MOVLW	.160;7.5			NESTA ROTINA OS MESMO PASSOS SEGUIDOS ANTERIORMENTE SÃO EXECUTADOS PARA O RAIO EM QUESTÃO
	SUBWF	ADRESH,W				    ;ATÉ O VALOR 10
	BTFSC	STATUS,C
	GOTO	NEG8
	CLRF	MSD
	MOVLW	B'00010011'
	MOVWF	LSD
	GOTO	MAIN
	NEG8	
		MOVLW	B'00100000'
		MOVWF	LSD
		CLRF	MSD
		GOTO	MAIN
		
RANGE_8_TO_9
	MOVLW	.181;8.5			NESTA ROTINA OS MESMO PASSOS SEGUIDOS ANTERIORMENTE SÃO EXECUTADOS PARA O RAIO EM QUESTÃO
	SUBWF	ADRESH,W				    ;ATÉ O VALOR 10
	BTFSC	STATUS,C
	GOTO	NEG9
	CLRF	MSD
	MOVLW	B'00100000'
	MOVWF	LSD
	GOTO	MAIN
	NEG9	
		MOVLW	B'00100001'
		MOVWF	LSD
		CLRF	MSD
		GOTO	MAIN
		
RANGE_9_TO_10
	MOVLW	.202;9.5		O VALOR .202 EQUIVALE A 9.5V, ENTÃO ESSA SERÁ A REFERENCIA PARA O ARREDONDAMENTO
	SUBWF	ADRESH,W		;SUBTRAI A REFERENCIA DO ADRESH, ASSIM SABEREMOS SE O VALOR TA MAIS PRA 9 OU PRA 10
	BTFSC	STATUS,C		;SE O BIT DE CARRY FOR 1, ENTÃO O VALOR DE ENTRADA TA MAIS PARA 10V
	GOTO	NEG10			;CHAMA A PARTE DE ARREDONDAMENTO PRA CIMA, SE NÃO, ELE IRA ARREDONDAR PARA BAIXO
	CLRF	MSD			;LIMPA O DIGITO MAIS SIGNIFICATIVO, POIS ESTAMOS ABAIXO DE 10V
	MOVLW	B'00100001'		;MOVE O SEGUINTE VALOR PARA O W, ESSE VALOR IRA CORREPONDER A 9, POIS O GPIO IRA TRABALHAR COM GP5,4,2,1, ENTÃO USAREMOS OS MESMO BITS PARA RESPRESNTAR O VALOR
	MOVWF	LSD			;MOVE O VALOR PARA O DIGITO MENOS SIGNIFICATIVO, ELE IRA JOGAR 1001 NO GPIO [GP5,4,1,0]=[1001]
	GOTO	MAIN			;VOLTA PARA A MAIN
	NEG10				;NA ROTINA DE ARREDONDAMENTO PARA CIMA, USAREMOS OS DOIS DIGITOS
		CLRF	LSD		;PRIMEIRO COLOCAMOS ZERO MENOS SIGNIFICATIVO, POR SER A TENSÃO DE 10V
		MOVLW	.1		;EM SEGUIDA, MOVEMOS O VALOR DE 1 PARA W
		MOVWF	MSD		;E O COLOCAMOS NO MAIS SIGNIFICATIVO, ASSIM FORMANDO O VALOR DE 10 V [MSD:LSD]
		GOTO	MAIN		;RETORNA PARA MAIN
		
RANGE_10_TO_11
	MOVLW	.224;10.5		O VALOR .224 EQUIVALE A 10.5V, ENTÃO ESSA SERÁ A REFERENCIA PARA O ARREDONDAMENTO
	SUBWF	ADRESH,W		;SUBTRAI A REFERENCIA DO ADRESH, ASSIM SABEREMOS SE O VALOR TA MAIS PRA 10 OU PRA 11
	BTFSC	STATUS,C		;SE O BIT DE CARRY FOR 1, ENTÃO O VALOR DE ENTRADA TA MAIS PARA 11V
	GOTO	NEG11			;CHAMA A PARTE DE ARREDONDAMENTO PRA CIMA, SE NÃO, ELE IRA ARREDONDAR PARA BAIXO
	CLRF	LSD			;COMO NESSA PARTE É UM ARREDONDAMENTO PARA BAIXO EM 10V, MOVE-SE O VALOR DE 0 PARA O DIGITO MENOS SIGNIFICATIVO
	MOVLW	.1			;EM SEGUIDA COLOCA 1 NO DIGITO MAIS SIGNIFICATIVO, FORMADO O VALOR DE 10V [MSD:LSD]
	MOVWF	MSD
	GOTO	MAIN			;RETORNA PARA MAIN
	NEG11	
		MOVLW	.1		;NA ROTINA DE ARREDONDAMENTO PARA CIMA, MOVE-SE 1 PARA W
		MOVWF	LSD		;SE TRATANDO DE 11V, MOVE O W TANTO PARA O LSD, COMO MSD, FORMANDO 11 V
		MOVWF	MSD
		GOTO	MAIN		;RETORNA PARA MAIN

RANGE_11_TO_12	
	MOVLW	.245;11.5		O VALOR .224 EQUIVALE A 10.5V, ENTÃO ESSA SERÁ A REFERENCIA PARA O ARREDONDAMENTO
	SUBWF	ADRESH,W		;SUBTRAI A REFERENCIA DO ADRESH, ASSIM SABEREMOS SE O VALOR TA MAIS PRA 11 OU PRA 12
	BTFSC	STATUS,C		;SE O BIT DE CARRY FOR 1, ENTÃO O VALOR DE ENTRADA TA MAIS PARA 12V
	GOTO	NEG12			;CHAMA A PARTE DE ARREDONDAMENTO PRA CIMA, SE NÃO, ELE IRA ARREDONDAR PARA BAIXO
	MOVLW	.1			;COMO NESSA PARTE É UM ARREDONDAMENTO PARA BAIXO EM 11V, MOVE-SE O VALOR DE 1 PARA O DIGITO MENOS E MAIS SIGNIFICATIVO
	MOVWF	LSD
	MOVWF	MSD
	GOTO	MAIN			;RETORNA PARA MAIN
	NEG12	
		MOVLW	.2		;NA ROTINA DE ARREDONDAMENTO PARA CIMA, MOVE-SE 2 PARA W
		MOVWF	LSD		;SALVA-O NO DIGITO MENOS SIGNIFICATIVO
		MOVLW	.1		;MOVE O 1 PARA O W
		MOVWF	MSD		;JOGA-O NO DIGITO MAIS SIGNIFICATIVO
		GOTO	MAIN		;RETORNA PARA MAIN
	
	
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
;*                       FIM DO PROGRAMA                           *
;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

	END
